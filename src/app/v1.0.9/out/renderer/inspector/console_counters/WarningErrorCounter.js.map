{"version":3,"file":"WarningErrorCounter.js","sourceRoot":"","sources":["../../../../../front_end/console_counters/WarningErrorCounter.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as BrowserSDK from '../browser_sdk/browser_sdk.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Root from '../root/root.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as UI from '../ui/ui.js';\n\n/**\n * @implements {UI.Toolbar.Provider}\n */\nexport class WarningErrorCounter {\n  constructor() {\n    WarningErrorCounter._instanceForTest = this;\n\n    const countersWrapper = document.createElement('div');\n    this._toolbarItem = new UI.Toolbar.ToolbarItem(countersWrapper);\n    this._toolbarItem.setVisible(false);\n\n    /**\n     * @param {!Element} parent\n     * @param {function():void} delegate\n     * @return {!Element}\n     */\n    function createCounter(parent, delegate) {\n      const container = parent.createChild('div');\n      container.classList.add('main-toolbar-counter');\n      const shadowRoot = UI.Utils.createShadowRootWithCoreStyles(\n          container,\n          {cssFile: 'console_counters/warningErrorCounter.css', enableLegacyPatching: true, delegatesFocus: undefined});\n      const button = shadowRoot.createChild('button');\n      button.classList.add('toolbar-counter-button', 'hidden');\n      button.addEventListener('click', delegate, false);\n      return button;\n    }\n\n    this._consoleCounter =\n        createCounter(countersWrapper, Common.Console.Console.instance().show.bind(Common.Console.Console.instance()));\n\n    this._violationCounter = null;\n    if (Root.Runtime.experiments.isEnabled('spotlight')) {\n      this._violationCounter = createCounter(countersWrapper, () => {\n        UI.ViewManager.ViewManager.instance().showView('lighthouse');\n      });\n    }\n\n    this._issuesCounter = createCounter(countersWrapper, () => {\n      Host.userMetrics.issuesPanelOpenedFrom(Host.UserMetrics.IssueOpener.StatusBarIssuesCounter);\n      UI.ViewManager.ViewManager.instance().showView('issues-pane');\n    });\n\n    this._errors = this._createItem(this._consoleCounter, 'smallicon-error');\n    this._warnings = this._createItem(this._consoleCounter, 'smallicon-warning');\n    if (this._violationCounter) {\n      this._violations = this._createItem(this._violationCounter, 'smallicon-info');\n    }\n    this._issues = this._createItem(this._issuesCounter, 'smallicon-issue-blue-text');\n    this._titles = '';\n    /** @type {number} */\n    this._errorCount = -1;\n    /** @type {number} */\n    this._warningCount = -1;\n    /** @type {number} */\n    this._violationCount = -1;\n    /** @type {number} */\n    this._issuesCount = -1;\n    this._throttler = new Common.Throttler.Throttler(100);\n\n    SDK.ConsoleModel.ConsoleModel.instance().addEventListener(\n        SDK.ConsoleModel.Events.ConsoleCleared, this._update, this);\n    SDK.ConsoleModel.ConsoleModel.instance().addEventListener(SDK.ConsoleModel.Events.MessageAdded, this._update, this);\n    SDK.ConsoleModel.ConsoleModel.instance().addEventListener(\n        SDK.ConsoleModel.Events.MessageUpdated, this._update, this);\n\n    BrowserSDK.IssuesManager.IssuesManager.instance().addEventListener(\n        BrowserSDK.IssuesManager.Events.IssuesCountUpdated, this._update, this);\n\n    this._update();\n  }\n\n  _updatedForTest() {\n    // Sniffed in tests.\n  }\n\n  /**\n   * @param {!Node} shadowRoot\n   * @param {string} iconType\n   * @return {!{item: !Element, text: !Element}}\n   */\n  _createItem(shadowRoot, iconType) {\n    const item = document.createElement('span');\n    item.classList.add('toolbar-counter-item');\n    UI.ARIAUtils.markAsHidden(item);\n    const icon = /** @type {!UI.UIUtils.DevToolsIconLabel} */ (item.createChild('span', '', 'dt-icon-label'));\n    icon.type = iconType;\n    const text = icon.createChild('span');\n    shadowRoot.appendChild(item);\n    return {item: item, text: text};\n  }\n\n  /**\n   * @param {!{item: !Element, text: !Element}} item\n   * @param {number} count\n   * @param {boolean} first\n   */\n  _updateItem(item, count, first) {\n    item.item.classList.toggle('hidden', !count);\n    item.item.classList.toggle('toolbar-counter-item-first', first);\n    item.text.textContent = String(count);\n  }\n\n  _update() {\n    this._updatingForTest = true;\n    this._throttler.schedule(this._updateThrottled.bind(this));\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  async _updateThrottled() {\n    const errors = SDK.ConsoleModel.ConsoleModel.instance().errors();\n    const warnings = SDK.ConsoleModel.ConsoleModel.instance().warnings();\n    const violations = this._violationCounter ? SDK.ConsoleModel.ConsoleModel.instance().violations() : 0;\n    const issues = BrowserSDK.IssuesManager.IssuesManager.instance().numberOfIssues();\n    if (errors === this._errorCount && warnings === this._warningCount && violations === this._violationCount &&\n        issues === this._issuesCount) {\n      return;\n    }\n    this._errorCount = errors;\n    this._warningCount = warnings;\n    this._violationCount = violations;\n    this._issuesCount = issues;\n\n    this._consoleCounter.classList.toggle('hidden', !(errors || warnings));\n    if (this._violationCounter) {\n      this._violationCounter.classList.toggle('hidden', !violations);\n    }\n    this._issuesCounter.classList.toggle('hidden', !issues);\n    this._toolbarItem.setVisible(Boolean(errors || warnings || violations || issues));\n\n    /* Update consoleCounter items. */\n    let errorCountTitle = '';\n    if (errors === 1) {\n      errorCountTitle = ls`${errors} error`;\n    } else {\n      errorCountTitle = ls`${errors} errors`;\n    }\n    this._updateItem(this._errors, errors, true);\n\n    let warningCountTitle = '';\n    if (warnings === 1) {\n      warningCountTitle = ls`${warnings} warning`;\n    } else {\n      warningCountTitle = ls`${warnings} warnings`;\n    }\n    this._updateItem(this._warnings, warnings, !errors);\n\n    let consoleSummary = '';\n    if (errors && warnings) {\n      consoleSummary = ls`${errorCountTitle}, ${warningCountTitle}`;\n    } else if (errors) {\n      consoleSummary = errorCountTitle;\n    } else if (warnings) {\n      consoleSummary = warningCountTitle;\n    }\n\n    this._titles = ls`Open Console to view ${consoleSummary}`;\n    UI.Tooltip.Tooltip.install(this._consoleCounter, this._titles);\n    UI.ARIAUtils.setAccessibleName(this._consoleCounter, this._titles);\n\n    /* Update violationCounter items. */\n    if (this._violationCounter && this._violations) {\n      let violationSummary = '';\n      if (violations === 1) {\n        violationSummary = ls`${violations} violation`;\n      } else {\n        violationSummary = ls`${violations} violations`;\n      }\n\n      const violationTitle = ls`Open Lighthouse to view ${violationSummary}`;\n      this._updateItem(this._violations, violations, true);\n      UI.Tooltip.Tooltip.install(this._violationCounter, violationTitle);\n      UI.ARIAUtils.setAccessibleName(this._violationCounter, violationTitle);\n    }\n\n    /* Update issuesCounter items. */\n    let issuesSummary = '';\n    if (issues === 1) {\n      issuesSummary = ls`${issues} issue`;\n    } else {\n      issuesSummary = ls`${issues} issues`;\n    }\n\n    const issuesTitle = ls`Open Issues to view ${issuesSummary}`;\n    this._updateItem(this._issues, issues, true);\n    UI.Tooltip.Tooltip.install(this._issuesCounter, issuesTitle);\n    UI.ARIAUtils.setAccessibleName(this._issuesCounter, issuesTitle);\n\n    UI.InspectorView.InspectorView.instance().toolbarItemResized();\n    this._updatingForTest = false;\n    this._updatedForTest();\n    return;\n  }\n\n  /**\n   * @override\n   * @return {?UI.Toolbar.ToolbarItem}\n   */\n  item() {\n    return this._toolbarItem;\n  }\n}\n\n/** @type {?WarningErrorCounter} */\nWarningErrorCounter._instanceForTest = null;\n"]}