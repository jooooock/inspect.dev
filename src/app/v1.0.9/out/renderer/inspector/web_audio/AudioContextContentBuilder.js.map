{"version":3,"file":"AudioContextContentBuilder.js","sourceRoot":"","sources":["../../../../../front_end/web_audio/AudioContextContentBuilder.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../i18n/i18n.js';\nimport * as UI from '../ui/ui.js';\n\nexport const UIStrings = {\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  audiocontext: 'AudioContext',\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  offlineaudiocontext: 'OfflineAudioContext',\n  /**\n  *@description The current state of an item\n  */\n  state: 'State',\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  sampleRate: 'Sample Rate',\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  callbackBufferSize: 'Callback Buffer Size',\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  maxOutputChannels: 'Max Output Channels',\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  currentTime: 'Current Time',\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  callbackInterval: 'Callback Interval',\n  /**\n  *@description Text in Audio Context Content Builder\n  */\n  renderCapacity: 'Render Capacity',\n};\nconst str_ = i18n.i18n.registerUIStrings('web_audio/AudioContextContentBuilder.js', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ContextDetailBuilder {\n  /**\n   * @param {!Protocol.WebAudio.BaseAudioContext} context\n   */\n  constructor(context) {\n    this._fragment = document.createDocumentFragment();\n    this._container = document.createElement('div');\n    this._container.classList.add('context-detail-container');\n    this._fragment.appendChild(this._container);\n    this._build(context);\n  }\n\n  /**\n   * @param {!Protocol.WebAudio.BaseAudioContext} context\n   */\n  _build(context) {\n    const title = context.contextType === 'realtime' ? i18nString(UIStrings.audiocontext) :\n                                                       i18nString(UIStrings.offlineaudiocontext);\n    this._addTitle(title, context.contextId);\n    this._addEntry(i18nString(UIStrings.state), context.contextState);\n    this._addEntry(i18nString(UIStrings.sampleRate), context.sampleRate, 'Hz');\n    if (context.contextType === 'realtime') {\n      this._addEntry(i18nString(UIStrings.callbackBufferSize), context.callbackBufferSize, 'frames');\n    }\n    this._addEntry(i18nString(UIStrings.maxOutputChannels), context.maxOutputChannelCount, 'ch');\n  }\n\n  /**\n   * @param {string} title\n   * @param {string} subtitle\n   */\n  _addTitle(title, subtitle) {\n    this._container.appendChild(UI.Fragment.html`\n      <div class=\"context-detail-header\">\n        <div class=\"context-detail-title\">${title}</div>\n        <div class=\"context-detail-subtitle\">${subtitle}</div>\n      </div>\n    `);\n  }\n\n  /**\n   * @param {string} entry\n   * @param {(string|number)} value\n   * @param {string=} unit\n   */\n  _addEntry(entry, value, unit) {\n    const valueWithUnit = value + (unit ? ` ${unit}` : '');\n    this._container.appendChild(UI.Fragment.html`\n      <div class=\"context-detail-row\">\n        <div class=\"context-detail-row-entry\">${entry}</div>\n        <div class=\"context-detail-row-value\">${valueWithUnit}</div>\n      </div>\n    `);\n  }\n\n  /**\n   * @return {!DocumentFragment}\n   */\n  getFragment() {\n    return this._fragment;\n  }\n}\n\nexport class ContextSummaryBuilder {\n  /**\n   * @param {!Protocol.WebAudio.GraphObjectId} contextId\n   * @param {!Protocol.WebAudio.ContextRealtimeData} contextRealtimeData\n   */\n  constructor(contextId, contextRealtimeData) {\n    const time = contextRealtimeData.currentTime.toFixed(3);\n    const mean = (contextRealtimeData.callbackIntervalMean * 1000).toFixed(3);\n    const stddev = (Math.sqrt(contextRealtimeData.callbackIntervalVariance) * 1000).toFixed(3);\n    const capacity = (contextRealtimeData.renderCapacity * 100).toFixed(3);\n    this._fragment = document.createDocumentFragment();\n    this._fragment.appendChild(UI.Fragment.html`\n      <div class=\"context-summary-container\">\n        <span>${i18nString(UIStrings.currentTime)}: ${time} s</span>\n        <span>\\u2758</span>\n        <span>${i18nString(UIStrings.callbackInterval)}: μ = ${mean} ms, σ = ${stddev} ms</span>\n        <span>\\u2758</span>\n        <span>${i18nString(UIStrings.renderCapacity)}: ${capacity} %</span>\n      </div>\n    `);\n  }\n\n  /**\n   * @return {!DocumentFragment}\n   */\n  getFragment() {\n    return this._fragment;\n  }\n}\n"]}