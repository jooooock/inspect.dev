{"version":3,"file":"MainView.js","sourceRoot":"","sources":["../../../../../front_end/media/MainView.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';  // eslint-disable-line no-unused-vars\nimport * as SDK from '../sdk/sdk.js';\nimport * as UI from '../ui/ui.js';\n\nimport {MediaModel, PlayerEvent, ProtocolTriggers} from './MediaModel.js';  // eslint-disable-line no-unused-vars\nimport {PlayerDetailView} from './PlayerDetailView.js';\nimport {PlayerListView} from './PlayerListView.js';\n\n/** @interface */\nexport class TriggerHandler {\n  /** @param {!Protocol.Media.PlayerProperty} property */\n  onProperty(property) {\n  }\n\n  /** @param {!Protocol.Media.PlayerError} error */\n  onError(error) {\n  }\n\n  /** @param {!Protocol.Media.PlayerMessage} message */\n  onMessage(message) {\n  }\n\n  /** @param {!PlayerEvent} event */\n  onEvent(event) {\n  }\n}\n\n/** @interface */\nexport class TriggerDispatcher {\n  /**\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerProperty} property\n   */\n  onProperty(playerID, property) {\n  }\n\n  /**\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerError} error\n   */\n  onError(playerID, error) {\n  }\n\n  /**\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerMessage} message\n   */\n  onMessage(playerID, message) {\n  }\n\n  /**\n   * @param {string} playerID\n   * @param {!PlayerEvent} event\n   */\n  onEvent(playerID, event) {\n  }\n}\n\n/**\n * @implements TriggerHandler\n */\nclass PlayerDataCollection {\n  constructor() {\n    /** @type {!Map<string, string>} */\n    this._properties = new Map();\n\n    /** @type {!Array<!Protocol.Media.PlayerMessage>} */\n    this._messages = [];\n\n    /** @type {!Array<!PlayerEvent>} */\n    this._events = [];\n\n    /** @type {!Array<!Protocol.Media.PlayerError>} */\n    this._errors = [];\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.Media.PlayerProperty} property\n   */\n  onProperty(property) {\n    this._properties.set(property.name, property.value);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.Media.PlayerError} error */\n  onError(error) {\n    this._errors.push(error);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.Media.PlayerMessage} message\n   */\n  onMessage(message) {\n    this._messages.push(message);\n  }\n\n  /**\n   * @override\n   * @param {!PlayerEvent} event\n   */\n  onEvent(event) {\n    this._events.push(event);\n  }\n\n  export() {\n    return {'properties': this._properties, 'messages': this._messages, 'events': this._events, 'errors': this._errors};\n  }\n}\n\n/**\n * @implements TriggerDispatcher\n */\nclass PlayerDataDownloadManager {\n  constructor() {\n    /**\n     * @type {!Map<string, !PlayerDataCollection>}\n     */\n    this._playerDataCollection = new Map();\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  addPlayer(playerID) {\n    this._playerDataCollection.set(playerID, new PlayerDataCollection());\n  }\n\n  /**\n   * @override\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerProperty} property\n   */\n  onProperty(playerID, property) {\n    const playerProperty = this._playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onProperty(property);\n  }\n\n  /**\n   * @override\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerError} error\n   */\n  onError(playerID, error) {\n    const playerProperty = this._playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onError(error);\n  }\n\n  /**\n   * @override\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerMessage} message\n   */\n  onMessage(playerID, message) {\n    const playerProperty = this._playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onMessage(message);\n  }\n\n  /**\n   * @override\n   * @param {string} playerID\n   * @param {!PlayerEvent} event\n   */\n  onEvent(playerID, event) {\n    const playerProperty = this._playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      return;\n    }\n\n    playerProperty.onEvent(event);\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  exportPlayerData(playerID) {\n    const playerProperty = this._playerDataCollection.get(playerID);\n    if (!playerProperty) {\n      throw new Error('Unable to find player');\n    }\n\n    return playerProperty.export();\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  deletePlayer(playerID) {\n    this._playerDataCollection.delete(playerID);\n  }\n}\n\n/**\n * @implements {SDK.SDKModel.SDKModelObserver<!MediaModel>}\n */\nexport class MainView extends UI.Panel.PanelWithSidebar {\n  constructor() {\n    super('Media');\n    this.registerRequiredCSS('media/mediaView.css', {enableLegacyPatching: true});\n\n    // Map<PlayerDetailView>\n    this._detailPanels = new Map();\n\n    // Map<string>\n    this._deletedPlayers = new Set();\n\n    this._downloadStore = new PlayerDataDownloadManager();\n\n    this._sidebar = new PlayerListView(this);\n    this._sidebar.show(this.panelSidebarElement());\n\n    SDK.SDKModel.TargetManager.instance().observeModels(MediaModel, this);\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  renderMainPanel(playerID) {\n    if (!this._detailPanels.has(playerID)) {\n      return;\n    }\n    const mainWidget = this.splitWidget().mainWidget();\n    if (mainWidget) {\n      mainWidget.detachChildWidgets();\n    }\n    this._detailPanels.get(playerID).show(this.mainElement());\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    super.wasShown();\n    for (const model of SDK.SDKModel.TargetManager.instance().models(MediaModel)) {\n      this._addEventListeners(model);\n    }\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    for (const model of SDK.SDKModel.TargetManager.instance().models(MediaModel)) {\n      this._removeEventListeners(model);\n    }\n  }\n\n  /**\n   * @override\n   * @param {!MediaModel} model\n   */\n  modelAdded(model) {\n    if (this.isShowing()) {\n      this._addEventListeners(model);\n    }\n  }\n\n  /**\n   * @override\n   * @param {!MediaModel} model\n   */\n  modelRemoved(model) {\n    this._removeEventListeners(model);\n  }\n\n  /**\n   * @param {!MediaModel} mediaModel\n   */\n  _addEventListeners(mediaModel) {\n    mediaModel.ensureEnabled();\n    mediaModel.addEventListener(ProtocolTriggers.PlayerPropertiesChanged, this._propertiesChanged, this);\n    mediaModel.addEventListener(ProtocolTriggers.PlayerEventsAdded, this._eventsAdded, this);\n    mediaModel.addEventListener(ProtocolTriggers.PlayerMessagesLogged, this._messagesLogged, this);\n    mediaModel.addEventListener(ProtocolTriggers.PlayerErrorsRaised, this._errorsRaised, this);\n    mediaModel.addEventListener(ProtocolTriggers.PlayersCreated, this._playersCreated, this);\n  }\n\n  /**\n   * @param {!MediaModel} mediaModel\n   */\n  _removeEventListeners(mediaModel) {\n    mediaModel.removeEventListener(ProtocolTriggers.PlayerPropertiesChanged, this._propertiesChanged, this);\n    mediaModel.removeEventListener(ProtocolTriggers.PlayerEventsAdded, this._eventsAdded, this);\n    mediaModel.removeEventListener(ProtocolTriggers.PlayerMessagesLogged, this._messagesLogged, this);\n    mediaModel.removeEventListener(ProtocolTriggers.PlayerErrorsRaised, this._errorsRaised, this);\n    mediaModel.removeEventListener(ProtocolTriggers.PlayersCreated, this._playersCreated, this);\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  _onPlayerCreated(playerID) {\n    this._sidebar.addMediaElementItem(playerID);\n    this._detailPanels.set(playerID, new PlayerDetailView());\n    this._downloadStore.addPlayer(playerID);\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _propertiesChanged(event) {\n    for (const property of event.data.properties) {\n      this.onProperty(event.data.playerId, property);\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _eventsAdded(event) {\n    for (const ev of event.data.events) {\n      this.onEvent(event.data.playerId, ev);\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _messagesLogged(event) {\n    for (const message of event.data.messages) {\n      this.onMessage(event.data.playerId, message);\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _errorsRaised(event) {\n    for (const error of event.data.errors) {\n      this.onError(event.data.playerId, error);\n    }\n  }\n\n  /**\n   * @param {string} playerID\n   * @return {boolean}\n   */\n  _shouldPropagate(playerID) {\n    return !this._deletedPlayers.has(playerID) && this._detailPanels.has(playerID);\n  }\n\n  /**\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerProperty} property\n   */\n  onProperty(playerID, property) {\n    if (!this._shouldPropagate(playerID)) {\n      return;\n    }\n    this._sidebar.onProperty(playerID, property);\n    this._downloadStore.onProperty(playerID, property);\n    this._detailPanels.get(playerID).onProperty(property);\n  }\n\n  /**\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerError} error\n   */\n  onError(playerID, error) {\n    if (!this._shouldPropagate(playerID)) {\n      return;\n    }\n    this._sidebar.onError(playerID, error);\n    this._downloadStore.onError(playerID, error);\n    this._detailPanels.get(playerID).onError(error);\n  }\n\n  /**\n   * @param {string} playerID\n   * @param {!Protocol.Media.PlayerMessage} message\n   */\n  onMessage(playerID, message) {\n    if (!this._shouldPropagate(playerID)) {\n      return;\n    }\n    this._sidebar.onMessage(playerID, message);\n    this._downloadStore.onMessage(playerID, message);\n    this._detailPanels.get(playerID).onMessage(message);\n  }\n\n  /**\n   * @param {string} playerID\n   * @param {!PlayerEvent} event\n   */\n  onEvent(playerID, event) {\n    if (!this._shouldPropagate(playerID)) {\n      return;\n    }\n    this._sidebar.onEvent(playerID, event);\n    this._downloadStore.onEvent(playerID, event);\n    this._detailPanels.get(playerID).onEvent(event);\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _playersCreated(event) {\n    const playerlist = /** @type {!Iterable.<string>} */ (event.data);\n    for (const playerID of playerlist) {\n      this._onPlayerCreated(playerID);\n    }\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  markPlayerForDeletion(playerID) {\n    // TODO(tmathmeyer): send this to chromium to save the storage space there too.\n    this._deletedPlayers.add(playerID);\n    this._detailPanels.delete(playerID);\n    this._sidebar.deletePlayer(playerID);\n    this._downloadStore.deletePlayer(playerID);\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  markOtherPlayersForDeletion(playerID) {\n    for (const keyID of this._detailPanels.keys()) {\n      if (keyID !== playerID) {\n        this.markPlayerForDeletion(keyID);\n      }\n    }\n  }\n\n  /**\n   * @param {string} playerID\n   */\n  exportPlayerData(playerID) {\n    const dump = this._downloadStore.exportPlayerData(playerID);\n    const uriContent = 'data:application/octet-stream,' + encodeURIComponent(JSON.stringify(dump, null, 2));\n    const anchor = document.createElement('a');\n    anchor.href = uriContent;\n    anchor.download = playerID + '.json';\n    anchor.click();\n  }\n}\n"]}