{"version":3,"file":"TickingFlameChart.js","sourceRoot":"","sources":["../../../../../front_end/media/TickingFlameChart.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as PerfUI from '../perf_ui/perf_ui.js';\nimport * as Platform from '../platform/platform.js';  // eslint-disable-line no-unused-vars\nimport * as ThemeSupport from '../theme_support/theme_support.js';\nimport * as UI from '../ui/ui.js';\n\nimport {PlayerEvent} from './MediaModel.js';  // eslint-disable-line no-unused-vars\nimport {Bounds, FormatMillisecondsToSeconds} from './TickingFlameChartHelpers.js';\n\nconst defaultFont = '11px ' + Host.Platform.fontFamily();\nconst defaultColor =\n    ThemeSupport.ThemeSupport.instance().patchColorText('#444', ThemeSupport.ThemeSupport.ColorUsage.Foreground);\n\nconst DefaultStyle = {\n  height: 20,\n  padding: 2,\n  collapsible: false,\n  font: defaultFont,\n  color: defaultColor,\n  backgroundColor: 'rgba(100 0 0 / 10%)',\n  nestingLevel: 0,\n  itemsHeight: 20,\n  shareHeaderLine: false,\n  useFirstLineForOverview: false,\n  useDecoratorsForOverview: false\n};\n\nexport const HotColorScheme = ['#ffba08', '#faa307', '#f48c06', '#e85d04', '#dc2f02', '#d00000', '#9d0208'];\nexport const ColdColorScheme = ['#7400b8', '#6930c3', '#5e60ce', '#5390d9', '#4ea8de', '#48bfe3', '#56cfe1', '#64dfdf'];\n\n\n/**\n * @param {string} backgroundColor\n * @return {string}\n */\nfunction calculateFontColor(backgroundColor) {\n  const parsedColor = Common.Color.Color.parse(backgroundColor);\n  // Dark background needs a light font.\n  if (parsedColor && parsedColor.hsla()[2] < 0.5) {\n    return '#eee';\n  }\n  return '#444';\n}\n\n\n/**\n * @typedef {{\n *     setLive: (!function(number):number),\n *     setComplete: (!function(number):void),\n *     updateMaxTime: (!function(number):void)\n * }}\n */\nlet EventHandlers;  // eslint-disable-line no-unused-vars\n\n\n/**\n * @typedef {{\n *     level: number,\n *     startTime: number,\n *     duration: (number|undefined),\n *     name: string,\n *     color: (string|undefined),\n *     hoverData: (Object|undefined|null)\n * }}\n */\n// @ts-ignore typedef\nexport let EventProperties;  // eslint-disable-line no-unused-vars\n\n/**\n * Wrapper class for each event displayed on the timeline.\n */\nexport class Event {\n  /**\n   * @param {*} timelineData\n   * @param {!EventHandlers} eventHandlers\n   * @param {!EventProperties=} eventProperties\n   */\n  constructor(\n      timelineData, eventHandlers,\n      eventProperties = {color: undefined, duration: undefined, hoverData: {}, level: 0, name: '', startTime: 0}) {\n    // These allow the event to privately change it's own data in the timeline.\n    this._timelineData = timelineData;\n    this._setLive = eventHandlers.setLive;\n    this._setComplete = eventHandlers.setComplete;\n    this._updateMaxTime = eventHandlers.updateMaxTime;\n\n    // This is the index in the timelineData arrays we should be writing to.\n    this._selfIndex = this._timelineData.entryLevels.length;\n    this._live = false;\n\n    // Can't use the dict||or||default syntax, since NaN is a valid expected duration.\n    const duration = eventProperties['duration'] === undefined ? 0 : eventProperties['duration'];\n\n    this._timelineData.entryLevels.push(eventProperties['level'] || 0);\n    this._timelineData.entryStartTimes.push(eventProperties['startTime'] || 0);\n    this._timelineData.entryTotalTimes.push(duration);  // May initially push -1\n\n    // If -1 was pushed, we need to update it. The set end time method helps with this.\n    if (duration === -1) {\n      this.endTime = -1;\n    }\n\n    this._title = eventProperties['name'] || '';\n    this._color = eventProperties['color'] || HotColorScheme[0];\n    this._fontColor = calculateFontColor(this._color);\n    this._hoverData = eventProperties['hoverData'] || {};\n  }\n\n  /**\n   * Render hovertext into the |htmlElement|\n   * @param {!HTMLElement} htmlElement\n   */\n  decorate(htmlElement) {\n    htmlElement.createChild('span').textContent = `Name: ${this._title}`;\n    htmlElement.createChild('br');\n\n    const startTimeReadable = FormatMillisecondsToSeconds(this.startTime, 2);\n    if (this._live) {\n      htmlElement.createChild('span').textContent = `Duration: ${startTimeReadable} - LIVE!`;\n    } else if (!isNaN(this.duration)) {\n      const durationReadable = FormatMillisecondsToSeconds(this.duration + this.startTime, 2);\n      htmlElement.createChild('span').textContent = `Duration: ${startTimeReadable} - ${durationReadable}`;\n    } else {\n      htmlElement.createChild('span').textContent = `Time: ${startTimeReadable}`;\n    }\n  }\n\n  /**\n   * set an event to be \"live\" where it's ended time is always the chart maximum\n   * or to be a fixed time.\n   * @param {number} time\n   */\n  set endTime(time) {\n    // Setting end time to -1 signals that an event becomes live\n    if (time === -1) {\n      this._timelineData.entryTotalTimes[this._selfIndex] = this._setLive(this._selfIndex);\n      this._live = true;\n    } else {\n      this._live = false;\n      const duration = time - this._timelineData.entryStartTimes[this._selfIndex];\n      this._timelineData.entryTotalTimes[this._selfIndex] = duration;\n      this._setComplete(this._selfIndex);\n      this._updateMaxTime(time);\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  get id() {\n    return this._selfIndex;\n  }\n\n  /**\n   * @param {number} level\n   */\n  set level(level) {\n    this._timelineData.entryLevels[this._selfIndex] = level;\n  }\n\n  /**\n   * @param {string} text\n   */\n  set title(text) {\n    this._title = text;\n  }\n\n  /**\n   * @return {string}\n   */\n  get title() {\n    return this._title;\n  }\n\n  /**\n   * @param {string} color\n   */\n  set color(color) {\n    this._color = color;\n    this._fontColor = calculateFontColor(this._color);\n  }\n\n  /**\n   * @return {string}\n   */\n  get color() {\n    return this._color;\n  }\n\n  get fontColor() {\n    return this._fontColor;\n  }\n\n  /**\n   * @return {number}\n   */\n  get startTime() {\n    // Round it\n    return this._timelineData.entryStartTimes[this._selfIndex];\n  }\n\n  /**\n   * @return {number}\n   */\n  get duration() {\n    return this._timelineData.entryTotalTimes[this._selfIndex];\n  }\n\n  /**\n   * @return {boolean}\n   */\n  get live() {\n    return this._live;\n  }\n}\n\n\nexport class TickingFlameChart extends UI.Widget.VBox {\n  constructor() {\n    super();\n\n    // set to update once per second _while the tab is active_\n    this._intervalTimer = 0;\n    this._lastTimestamp = 0;\n    this._canTick = true;\n    this._ticking = false;\n    this._isShown = false;\n\n    // The max bounds for scroll-out.\n    this._bounds = new Bounds(0, 1000, 30000, 1000);\n\n    // Create the data provider with the initial max bounds,\n    // as well as a function to attempt bounds updating everywhere.\n    this._dataProvider = new TickingFlameChartDataProvider(this._bounds, this._updateMaxTime.bind(this));\n\n    // Delegate doesn't do much for now.\n    this._delegate = new TickingFlameChartDelegate();\n\n    // Chart settings.\n    this._chartGroupExpansionSetting =\n        Common.Settings.Settings.instance().createSetting('mediaFlameChartGroupExpansion', {});\n\n    // Create the chart.\n    this._chart =\n        new PerfUI.FlameChart.FlameChart(this._dataProvider, this._delegate, this._chartGroupExpansionSetting);\n\n    // TODO: needs to have support in the delegate for supporting this.\n    this._chart.disableRangeSelection();\n\n    // Scrolling should change the current bounds, and repaint the chart.\n    this._chart.bindCanvasEvent('wheel', e => {\n      this._onScroll(/** @type {!WheelEvent} */ (e));\n    });\n\n    // Add the chart.\n    this._chart.show(this.contentElement);\n  }\n\n  /**\n   * Add a marker with |properties| at |time|.\n   * @param {!EventProperties} properties\n   */\n  addMarker(properties) {\n    properties['duration'] = NaN;\n    this.startEvent(properties);\n  }\n\n  /**\n   * Create an event which will be set to live by default.\n   * @param {!EventProperties} properties\n   * @return {!Event}\n   */\n  startEvent(properties) {\n    // Make sure that an unspecified event gets live duration.\n    // Have to check for undefined, since NaN is allowed but evaluates to false.\n    if (properties['duration'] === undefined) {\n      properties['duration'] = -1;\n    }\n    const time = properties['startTime'] || 0;\n\n    // Event has to be created before the updateMaxTime call.\n    const event = this._dataProvider.startEvent(properties);\n\n    this._updateMaxTime(time);\n    return event;\n  }\n\n  /**\n   * Add a group with |name| that can contain |depth| different tracks.\n   * @param {!Platform.UIString.LocalizedString} name\n   * @param {number} depth\n   */\n  addGroup(name, depth) {\n    this._dataProvider.addGroup(name, depth);\n  }\n\n  /**\n   * @param {number} time\n   */\n  _updateMaxTime(time) {\n    if (this._bounds.pushMaxAtLeastTo(time)) {\n      this._updateRender();\n    }\n  }\n\n  /**\n   * @param {!WheelEvent} e\n   */\n  _onScroll(e) {\n    // TODO: is this a good divisor? does it account for high presicision scroll wheels?\n    // low precisision scroll wheels?\n    const scrollTickCount = Math.round(e.deltaY / 50);\n    const scrollPositionRatio = e.offsetX / /** @type {!HTMLElement} */ (e.srcElement).clientWidth;\n    if (scrollTickCount > 0) {\n      this._bounds.zoomOut(scrollTickCount, scrollPositionRatio);\n    } else {\n      this._bounds.zoomIn(-scrollTickCount, scrollPositionRatio);\n    }\n    this._updateRender();\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    this._isShown = false;\n    if (this._ticking) {\n      this._stop();\n    }\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    this._isShown = true;\n    if (this._canTick && !this._ticking) {\n      this._start();\n    }\n  }\n\n  /**\n   * Is the timeline allowed to tick forward.\n   * @param {boolean} allowed\n   */\n  set canTick(allowed) {\n    this._canTick = allowed;\n    if (this._ticking && !allowed) {\n      this._stop();\n    }\n    if (!this._ticking && this._isShown && allowed) {\n      this._start();\n    }\n  }\n\n  _start() {\n    if (this._lastTimestamp === 0) {\n      this._lastTimestamp = Date.now();\n    }\n    if (this._intervalTimer !== 0 || this._stoppedPermanently) {\n      return;\n    }\n    // 16 ms is roughly 60 fps.\n    this._intervalTimer = window.setInterval(this._updateRender.bind(this), 16);\n    this._ticking = true;\n  }\n\n  _stop(permanently = false) {\n    window.clearInterval(this._intervalTimer);\n    this._intervalTimer = 0;\n    if (permanently) {\n      this._stoppedPermanently = true;\n    }\n    this._ticking = false;\n  }\n\n  _updateRender() {\n    if (this._ticking) {\n      const currentTimestamp = Date.now();\n      const duration = currentTimestamp - this._lastTimestamp;\n      this._lastTimestamp = currentTimestamp;\n      this._bounds.addMax(duration);\n    }\n    this._dataProvider.updateMaxTime(this._bounds);\n    this._chart.setWindowTimes(this._bounds.low, this._bounds.high, true);\n    this._chart.scheduleUpdate();\n  }\n}\n\n\n/**\n * Doesn't do much right now, but can be used in the future for selecting events.\n * @implements {PerfUI.FlameChart.FlameChartDelegate}\n */\nclass TickingFlameChartDelegate {\n  constructor() {\n  }\n\n  /**\n   * @override\n   * @param {number} windowStartTime\n   * @param {number} windowEndTime\n   * @param {boolean} animate\n   */\n  windowChanged(windowStartTime, windowEndTime, animate) {\n  }\n\n  /**\n   * @override\n   * @param {number} startTime\n   * @param {number} endTime\n   */\n  updateRangeSelection(startTime, endTime) {\n  }\n\n  /**\n   * @override\n   * @param {!PerfUI.FlameChart.FlameChart} flameChart\n   * @param {?PerfUI.FlameChart.Group} group\n   */\n  updateSelectedGroup(flameChart, group) {\n  }\n}\n\n\n/**\n * @implements {PerfUI.FlameChart.FlameChartDataProvider}\n */\nclass TickingFlameChartDataProvider {\n  /**\n   * @param {!Bounds} initialBounds\n   * @param {function(number):void} updateMaxTime\n   */\n  constructor(initialBounds, updateMaxTime) {\n    // do _not_ call this method from within this class - only for passing to events.\n    this._updateMaxTimeHandle = updateMaxTime;\n\n    this._bounds = initialBounds;\n\n    // All the events which should have their time updated when the chart ticks.\n    this._liveEvents = new Set();\n\n    // All events.\n    // Map<Event>\n    this._eventMap = new Map();\n\n    // Contains the numerical indicies. This is passed as a reference to the events\n    // so that they can update it when they change.\n    this._timelineData = new PerfUI.FlameChart.TimelineData([], [], [], []);\n\n    // The current sum of all group heights.\n    this._maxLevel = 0;\n  }\n\n  /**\n   * Add a group with |name| that can contain |depth| different tracks.\n   * @param {!Platform.UIString.LocalizedString} name\n   * @param {number} depth\n   */\n  addGroup(name, depth) {\n    if (this._timelineData.groups) {\n      this._timelineData.groups.push({\n        name: name,\n        startLevel: this._maxLevel,\n        expanded: true,\n        selectable: false,\n        style: DefaultStyle,\n        track: null\n      });\n    }\n    this._maxLevel += depth;\n  }\n\n  /**\n   * Create an event which will be set to live by default.\n   * @param {!EventProperties} properties\n   * @return {!Event}\n   */\n  startEvent(properties) {\n    properties['level'] = properties['level'] || 0;\n    if (properties['level'] > this._maxLevel) {\n      throw `level ${properties['level']} is above the maximum allowed of ${this._maxLevel}`;\n    }\n\n    const event = new Event(\n        this._timelineData, {\n          setLive: this._setLive.bind(this),\n          setComplete: this._setComplete.bind(this),\n          updateMaxTime: this._updateMaxTimeHandle\n        },\n        properties);\n\n    this._eventMap.set(event.id, event);\n    return event;\n  }\n\n  /**\n   * @param {number} index\n   * @return {number}\n   */\n  _setLive(index) {\n    this._liveEvents.add(index);\n    return this._bounds.max;\n  }\n\n  /**\n   * @param {number} index\n   * @return {void}\n   */\n  _setComplete(index) {\n    this._liveEvents.delete(index);\n  }\n\n  /**\n   * @param {!Bounds} bounds\n   */\n  updateMaxTime(bounds) {\n    this._bounds = bounds;\n    for (const eventID of this._liveEvents.entries()) {\n      // force recalculation of all live events.\n      this._eventMap.get(eventID[0]).endTime = -1;\n    }\n  }\n\n\n  /**\n   * @override\n   * @return {number}\n   */\n  maxStackDepth() {\n    return this._maxLevel + 1;\n  }\n\n  /**\n   * @override\n   * @return {!PerfUI.FlameChart.TimelineData}\n   */\n  timelineData() {\n    return this._timelineData;\n  }\n\n  /**\n   * @override\n   * @return {number} time in milliseconds\n   */\n  minimumBoundary() {\n    return this._bounds.low;\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  totalTime() {\n    return this._bounds.high;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {string}\n   */\n  entryColor(index) {\n    return this._eventMap.get(index).color;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {string}\n   */\n  textColor(index) {\n    return this._eventMap.get(index).fontColor;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {?string}\n   */\n  entryTitle(index) {\n    return this._eventMap.get(index).title;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {?string}\n   */\n  entryFont(index) {\n    return defaultFont;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @param {!CanvasRenderingContext2D} context\n   * @param {?string} text\n   * @param {number} barX\n   * @param {number} barY\n   * @param {number} barWidth\n   * @param {number} barHeight\n   * @param {number} unclippedBarX\n   * @param {number} timeToPixelRatio\n   * @return {boolean}\n   */\n  decorateEntry(index, context, text, barX, barY, barWidth, barHeight, unclippedBarX, timeToPixelRatio) {\n    return false;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {boolean}\n   */\n  forceDecoration(index) {\n    return false;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {?Element}\n   */\n  prepareHighlightedEntryInfo(index) {\n    const element = document.createElement('div');\n    this._eventMap.get(index).decorate(element);\n    return element;\n  }\n\n  /**\n   * @override\n   * @param {number} value\n   * @param {number=} precision\n   * @return {string}\n   */\n  formatValue(value, precision) {\n    // value is always [0, X] so we need to add lower bound\n    value += Math.round(this._bounds.low);\n\n    // Magic numbers of pre-calculated logorithms.\n\n    // we want to show additional decimals at the time when two adjacent labels\n    // would otherwise show the same number. At 3840 pixels wide, that cutoff\n    // happens to be about 30 seconds for one decimal and 2.8 for two decimals.\n    if (this._bounds.range < 2800) {\n      return FormatMillisecondsToSeconds(value, 2);\n    }\n    if (this._bounds.range < 30000) {\n      return FormatMillisecondsToSeconds(value, 1);\n    }\n    return FormatMillisecondsToSeconds(value, 0);\n  }\n\n  /**\n   * @override\n   * @param {number} entryIndex\n   * @return {boolean}\n   */\n  canJumpToEntry(entryIndex) {\n    return false;\n  }\n\n  /**\n   * @override\n   */\n  navStartTimes() {\n    return new Map();\n  }\n}\n"]}