{"version":3,"file":"utilities.js","sourceRoot":"","sources":["../../../../../front_end/platform/utilities.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2007 Apple Inc.  All rights reserved.\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* The long term goal here is to remove all functions in this file and\n * replace them with ES Module functions rather than prototype\n * extensions but in the mean time if an old func in here depends on one\n * that has been migrated, it will need to be imported.\n */\nimport {inverse} from './map-utilities.js';\nimport {caseInsensetiveComparator, escapeCharacters, regexSpecialCharacters, sprintf} from './string-utilities.js';\n\n// Still used in the test runners that can't use ES modules :(\nString.sprintf = sprintf;\n\n// @ts-ignore https://crbug.com/1050549\nString.regexSpecialCharacters = regexSpecialCharacters;\n// @ts-ignore https://crbug.com/1050549\nString.caseInsensetiveComparator = caseInsensetiveComparator;\n\n/**\n * @this {string}\n * @return {string}\n */\nString.prototype.escapeForRegExp = function() {\n  return escapeCharacters(this, regexSpecialCharacters());\n};\n\n/**\n * @param {number} maxLength\n * @return {string}\n */\nString.prototype.trimMiddle = function(maxLength) {\n  if (this.length <= maxLength) {\n    return String(this);\n  }\n  let leftHalf = maxLength >> 1;\n  let rightHalf = maxLength - leftHalf - 1;\n  if (/** @type {number} */ (this.codePointAt(this.length - rightHalf - 1)) >= 0x10000) {\n    --rightHalf;\n    ++leftHalf;\n  }\n  if (leftHalf > 0 && /** @type {number} */ (this.codePointAt(leftHalf - 1)) >= 0x10000) {\n    --leftHalf;\n  }\n  return this.substr(0, leftHalf) + '…' + this.substr(this.length - rightHalf, rightHalf);\n};\n\n/**\n * @param {number} maxLength\n * @return {string}\n */\nString.prototype.trimEndWithMaxLength = function(maxLength) {\n  if (this.length <= maxLength) {\n    return String(this);\n  }\n  return this.substr(0, maxLength - 1) + '…';\n};\n\n/**\n * @param {string} other\n * @return {number}\n */\nString.prototype.compareTo = function(other) {\n  if (this > other) {\n    return 1;\n  }\n  if (this < other) {\n    return -1;\n  }\n  return 0;\n};\n\n/**\n * @param {string|undefined} string\n * @return {number}\n */\nString.hashCode = function(string) {\n  if (!string) {\n    return 0;\n  }\n  // Hash algorithm for substrings is described in \"Über die Komplexität der Multiplikation in\n  // eingeschränkten Branchingprogrammmodellen\" by Woelfe.\n  // http://opendatastructures.org/versions/edition-0.1d/ods-java/node33.html#SECTION00832000000000000000\n  const p = ((1 << 30) * 4 - 5);  // prime: 2^32 - 5\n  const z = 0x5033d967;           // 32 bits from random.org\n  const z2 = 0x59d2f15d;          // random odd 32 bit number\n  let s = 0;\n  let zi = 1;\n  for (let i = 0; i < string.length; i++) {\n    const xi = string.charCodeAt(i) * z2;\n    s = (s + zi * xi) % p;\n    zi = (zi * z) % p;\n  }\n  s = (s + zi * (p - 1)) % p;\n  return Math.abs(s | 0);\n};\n\n/**\n * @param {string} a\n * @param {string} b\n * @return {number}\n */\nString.naturalOrderComparator = function(a, b) {\n  const chunk = /^\\d+|^\\D+/;\n  let chunka, chunkb, anum, bnum;\n  while (true) {\n    if (a) {\n      if (!b) {\n        return 1;\n      }\n    } else {\n      if (b) {\n        return -1;\n      }\n      return 0;\n    }\n    chunka = /** @type {!Array<string>} */ (a.match(chunk))[0];\n    chunkb = /** @type {!Array<string>} */ (b.match(chunk))[0];\n    anum = !Number.isNaN(Number(chunka));\n    bnum = !Number.isNaN(Number(chunkb));\n    if (anum && !bnum) {\n      return -1;\n    }\n    if (bnum && !anum) {\n      return 1;\n    }\n    if (anum && bnum) {\n      const diff = Number(chunka) - Number(chunkb);\n      if (diff) {\n        return diff;\n      }\n      if (chunka.length !== chunkb.length) {\n        if (!Number(chunka) && !Number(chunkb)) {  // chunks are strings of all 0s (special case)\n          return chunka.length - chunkb.length;\n        }\n        return chunkb.length - chunka.length;\n      }\n    } else if (chunka !== chunkb) {\n      return (chunka < chunkb) ? -1 : 1;\n    }\n    a = a.substring(chunka.length);\n    b = b.substring(chunkb.length);\n  }\n};\n\n/**\n * @param {string} value\n * @return {string}\n */\nNumber.toFixedIfFloating = function(value) {\n  if (!value || Number.isNaN(Number(value))) {\n    return value;\n  }\n  const number = Number(value);\n  return number % 1 ? number.toFixed(3) : String(number);\n};\n\n/**\n * @param {!Array<number>} array\n * @param {function(number, number): number} comparator\n * @param {number} left\n * @param {number} right\n * @param {number} pivotIndex\n * @return {number}\n */\nconst partition = (array, comparator, left, right, pivotIndex) => {\n  /**\n   * @param {!Array<number>} array\n   * @param {number} i1\n   * @param {number} i2\n   */\n  function swap(array, i1, i2) {\n    const temp = array[i1];\n    array[i1] = array[i2];\n    array[i2] = temp;\n  }\n\n  const pivotValue = array[pivotIndex];\n  swap(array, right, pivotIndex);\n  let storeIndex = left;\n  for (let i = left; i < right; ++i) {\n    if (comparator(array[i], pivotValue) < 0) {\n      swap(array, storeIndex, i);\n      ++storeIndex;\n    }\n  }\n  swap(array, right, storeIndex);\n  return storeIndex;\n};\n\n(function() {\nconst sortRange = {\n  /**\n     * @param {function(number, number): number} comparator\n     * @param {number} leftBound\n     * @param {number} rightBound\n     * @param {number} sortWindowLeft\n     * @param {number} sortWindowRight\n     * @return {!Array.<number>}\n     * @this {Array.<number>}\n     */\n  value: function(comparator, leftBound, rightBound, sortWindowLeft, sortWindowRight) {\n    /**\n     * @param {!Array<number>} array\n     * @param {function(number, number): number} comparator\n     * @param {number} left\n     * @param {number} right\n     * @param {number} sortWindowLeft\n     * @param {number} sortWindowRight\n     */\n    function quickSortRange(array, comparator, left, right, sortWindowLeft, sortWindowRight) {\n      if (right <= left) {\n        return;\n      }\n      const pivotIndex = Math.floor(Math.random() * (right - left)) + left;\n      const pivotNewIndex = partition(array, comparator, left, right, pivotIndex);\n      if (sortWindowLeft < pivotNewIndex) {\n        quickSortRange(array, comparator, left, pivotNewIndex - 1, sortWindowLeft, sortWindowRight);\n      }\n      if (pivotNewIndex < sortWindowRight) {\n        quickSortRange(array, comparator, pivotNewIndex + 1, right, sortWindowLeft, sortWindowRight);\n      }\n    }\n    if (leftBound === 0 && rightBound === (this.length - 1) && sortWindowLeft === 0 && sortWindowRight >= rightBound) {\n      this.sort(comparator);\n    } else {\n      quickSortRange(this, comparator, leftBound, rightBound, sortWindowLeft, sortWindowRight);\n    }\n    return this;\n  },\n  configurable: true,\n};\nObject.defineProperty(Array.prototype, 'sortRange', sortRange);\nObject.defineProperty(Uint32Array.prototype, 'sortRange', sortRange);\n})();\n\nObject.defineProperty(Array.prototype, 'lowerBound', {\n  /**\n   * Return index of the leftmost element that is equal or greater\n   * than the specimen object. If there's no such element (i.e. all\n   * elements are smaller than the specimen) returns right bound.\n   * The function works for sorted array.\n   * When specified, |left| (inclusive) and |right| (exclusive) indices\n   * define the search window.\n   *\n   * @param {!T} object\n   * @param {function(!T,!S):number} comparator\n   * @param {number=} left\n   * @param {number=} right\n   * @return {number}\n   * @this {Array.<!S>}\n   * @template T,S\n   */\n  value: function(object, comparator, left, right) {\n    /**\n     * @param {string|number} a\n     * @param {string|number} b\n     */\n    function defaultComparator(a, b) {\n      return a < b ? -1 : (a > b ? 1 : 0);\n    }\n    comparator = comparator || defaultComparator;\n    let l = left || 0;\n    let r = right !== undefined ? right : this.length;\n    while (l < r) {\n      const m = (l + r) >> 1;\n      if (comparator(object, this[m]) > 0) {\n        l = m + 1;\n      } else {\n        r = m;\n      }\n    }\n    return r;\n  },\n  configurable: true\n});\n\nObject.defineProperty(Array.prototype, 'upperBound', {\n  /**\n   * Return index of the leftmost element that is greater\n   * than the specimen object. If there's no such element (i.e. all\n   * elements are smaller or equal to the specimen) returns right bound.\n   * The function works for sorted array.\n   * When specified, |left| (inclusive) and |right| (exclusive) indices\n   * define the search window.\n   *\n   * @param {!T} object\n   * @param {function(!T,!S):number} comparator\n   * @param {number=} left\n   * @param {number=} right\n   * @return {number}\n   * @this {Array.<!S>}\n   * @template T,S\n   */\n  value: function(object, comparator, left, right) {\n    /**\n     * @param {string|number} a\n     * @param {string|number} b\n     */\n    function defaultComparator(a, b) {\n      return a < b ? -1 : (a > b ? 1 : 0);\n    }\n    comparator = comparator || defaultComparator;\n    let l = left || 0;\n    let r = right !== undefined ? right : this.length;\n    while (l < r) {\n      const m = (l + r) >> 1;\n      if (comparator(object, this[m]) >= 0) {\n        l = m + 1;\n      } else {\n        r = m;\n      }\n    }\n    return r;\n  },\n  configurable: true\n});\n\nObject.defineProperty(Uint32Array.prototype, 'lowerBound', {value: Array.prototype.lowerBound, configurable: true});\n\nObject.defineProperty(Uint32Array.prototype, 'upperBound', {value: Array.prototype.upperBound, configurable: true});\n\nObject.defineProperty(Int32Array.prototype, 'lowerBound', {value: Array.prototype.lowerBound, configurable: true});\n\nObject.defineProperty(Int32Array.prototype, 'upperBound', {value: Array.prototype.upperBound, configurable: true});\n\nObject.defineProperty(Float64Array.prototype, 'lowerBound', {value: Array.prototype.lowerBound, configurable: true});\n\nObject.defineProperty(Array.prototype, 'binaryIndexOf', {\n  /**\n   * @param {!T} value\n   * @param {function(!T,!S):number} comparator\n   * @return {number}\n   * @this {Array.<!S>}\n   * @template T,S\n   */\n  value: function(value, comparator) {\n    const index = this.lowerBound(value, comparator);\n    return index < this.length && comparator(value, this[index]) === 0 ? index : -1;\n  },\n  configurable: true\n});\n\nObject.defineProperty(Array.prototype, 'peekLast', {\n  /**\n   * @return {!T|undefined}\n   * @this {Array.<!T>}\n   * @template T\n   */\n  value: function() {\n    return this[this.length - 1];\n  },\n  configurable: true\n});\n\n(function() {\n  /**\n   * @param {!Array.<T>} array1\n   * @param {!Array.<T>} array2\n   * @param {function(T,T):number} comparator\n   * @param {boolean} mergeNotIntersect\n   * @return {!Array.<T>}\n   * @template T\n   */\n  function mergeOrIntersect(array1, array2, comparator, mergeNotIntersect) {\n    const result = [];\n    let i = 0;\n    let j = 0;\n    while (i < array1.length && j < array2.length) {\n      const compareValue = comparator(array1[i], array2[j]);\n      if (mergeNotIntersect || !compareValue) {\n        result.push(compareValue <= 0 ? array1[i] : array2[j]);\n      }\n      if (compareValue <= 0) {\n        i++;\n      }\n      if (compareValue >= 0) {\n        j++;\n      }\n    }\n    if (mergeNotIntersect) {\n      while (i < array1.length) {\n        result.push(array1[i++]);\n      }\n      while (j < array2.length) {\n        result.push(array2[j++]);\n      }\n    }\n    return result;\n  }\n\n  Object.defineProperty(Array.prototype, 'intersectOrdered', {\n    /**\n     * @param {!Array.<T>} array\n     * @param {function(T,T):number} comparator\n     * @return {!Array.<T>}\n     * @this {!Array.<T>}\n     * @template T\n     */\n    value: function(array, comparator) {\n      return mergeOrIntersect(this, array, comparator, false);\n    },\n    configurable: true\n  });\n\n  Object.defineProperty(Array.prototype, 'mergeOrdered', {\n    /**\n     * @param {!Array.<T>} array\n     * @param {function(T,T):number} comparator\n     * @return {!Array.<T>}\n     * @this {!Array.<T>}\n     * @template T\n     */\n    value: function(array, comparator) {\n      return mergeOrIntersect(this, array, comparator, true);\n    },\n    configurable: true\n  });\n})();\n\n/**\n * @param {string} query\n * @param {string=} flags\n * @return {!RegExp}\n */\nself.createPlainTextSearchRegex = function(query, flags) {\n  // This should be kept the same as the one in StringUtil.cpp.\n  let regex = '';\n  for (let i = 0; i < query.length; ++i) {\n    const c = query.charAt(i);\n    if (regexSpecialCharacters().indexOf(c) !== -1) {\n      regex += '\\\\';\n    }\n    regex += c;\n  }\n  return new RegExp(regex, flags || '');\n};\n\n/**\n * @return {?T}\n * @template T\n */\n// @ts-ignore https://crbug.com/1050549\nSet.prototype.firstValue = function() {\n  if (!this.size) {\n    return null;\n  }\n  return this.values().next().value;\n};\n\n/**\n * @return {!Multimap<K,V>}\n * @template K,V\n */\n// @ts-ignore https://crbug.com/1050549\nMap.prototype.inverse = function() {\n  return inverse(this);\n};\n\n/**\n * @template K, V\n */\nexport class Multimap {\n  constructor() {\n    /** @type {!Map.<K, !Set.<!V>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * @param {K} key\n   * @param {V} value\n   */\n  set(key, value) {\n    let set = this._map.get(key);\n    if (!set) {\n      set = new Set();\n      this._map.set(key, set);\n    }\n    set.add(value);\n  }\n\n  /**\n   * @param {K} key\n   * @return {!Set<!V>}\n   */\n  get(key) {\n    return this._map.get(key) || new Set();\n  }\n\n  /**\n   * @param {K} key\n   * @return {boolean}\n   */\n  has(key) {\n    return this._map.has(key);\n  }\n\n  /**\n   * @param {K} key\n   * @param {V} value\n   * @return {boolean}\n   */\n  hasValue(key, value) {\n    const set = this._map.get(key);\n    if (!set) {\n      return false;\n    }\n    return set.has(value);\n  }\n\n  /**\n   * @return {number}\n   */\n  get size() {\n    return this._map.size;\n  }\n\n  /**\n   * @param {K} key\n   * @param {V} value\n   * @return {boolean}\n   */\n  delete(key, value) {\n    const values = this.get(key);\n    if (!values) {\n      return false;\n    }\n    const result = values.delete(value);\n    if (!values.size) {\n      this._map.delete(key);\n    }\n    return result;\n  }\n\n  /**\n   * @param {K} key\n   */\n  deleteAll(key) {\n    this._map.delete(key);\n  }\n\n  /**\n   * @return {!Array.<K>}\n   */\n  keysArray() {\n    return [...this._map.keys()];\n  }\n\n  /**\n   * @return {!Array.<!V>}\n   */\n  valuesArray() {\n    const result = [];\n    for (const set of this._map.values()) {\n      result.push(...set.values());\n    }\n    return result;\n  }\n\n  clear() {\n    this._map.clear();\n  }\n}\n\n/**\n * @param {function():void} callback\n */\nexport function runOnWindowLoad(callback) {\n  function windowLoaded() {\n    window.removeEventListener('DOMContentLoaded', windowLoaded, false);\n    callback();\n  }\n\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    callback();\n  } else {\n    window.addEventListener('DOMContentLoaded', windowLoaded, false);\n  }\n}\n\n/**\n * @param {never} type\n * @param {string} message\n * @return {never}\n */\nexport function assertNever(type, message) {\n  throw new Error(message);\n}\n\nconst _singletonSymbol = Symbol('singleton');\n\n/**\n * @template T\n * @param {function(new:T)} constructorFunction\n * @return {!T}\n */\n// @ts-ignore https://crbug.com/1050549\nself.singleton = function(constructorFunction) {\n  if (_singletonSymbol in constructorFunction) {\n    // @ts-ignore We literally just confirmed this exists.\n    return constructorFunction[_singletonSymbol];\n  }\n  // @ts-ignore https://crbug.com/1050549\n  const instance = new constructorFunction();\n  // @ts-ignore https://crbug.com/1050549\n  constructorFunction[_singletonSymbol] = instance;\n  return instance;\n};\n\n/**\n * @param {?string} content\n * @return {number}\n */\nself.base64ToSize = function(content) {\n  if (!content) {\n    return 0;\n  }\n  let size = content.length * 3 / 4;\n  if (content[content.length - 1] === '=') {\n    size--;\n  }\n  if (content.length > 1 && content[content.length - 2] === '=') {\n    size--;\n  }\n  return size;\n};\n\n/**\n * @param {string} input\n * @return {string}\n */\n// @ts-ignore https://crbug.com/1050549\nself.unescapeCssString = function(input) {\n  // https://drafts.csswg.org/css-syntax/#consume-escaped-code-point\n  const reCssEscapeSequence = /(?<!\\\\)\\\\(?:([a-fA-F0-9]{1,6})|(.))[\\n\\t\\x20]?/gs;\n  return input.replace(reCssEscapeSequence, (_, $1, $2) => {\n    if ($2) {  // Handle the single-character escape sequence.\n      return $2;\n    }\n    // Otherwise, handle the code point escape sequence.\n    const codePoint = parseInt($1, 16);\n    const isSurrogate = 0xD800 <= codePoint && codePoint <= 0xDFFF;\n    if (isSurrogate || codePoint === 0x0000 || codePoint > 0x10FFFF) {\n      return '\\uFFFD';\n    }\n    return String.fromCodePoint(codePoint);\n  });\n};\n\n// @ts-ignore\nself.Platform = self.Platform || {};\n// @ts-ignore\nPlatform = Platform || {};\n\n/** @constructor */\nPlatform.Multimap = Multimap;\n"]}