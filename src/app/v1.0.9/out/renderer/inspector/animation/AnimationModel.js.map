{"version":3,"file":"AnimationModel.js","sourceRoot":"","sources":["../../../../../front_end/animation/AnimationModel.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../sdk/sdk.js';\n\nexport class AnimationModel extends SDK.SDKModel.SDKModel {\n  /**\n   * @param {!SDK.SDKModel.Target} target\n   */\n  constructor(target) {\n    super(target);\n    this._runtimeModel = /** @type {!SDK.RuntimeModel.RuntimeModel} */ (target.model(SDK.RuntimeModel.RuntimeModel));\n    this._agent = target.animationAgent();\n    target.registerAnimationDispatcher(new AnimationDispatcher(this));\n    /** @type {!Map.<string, !AnimationImpl>} */\n    this._animationsById = new Map();\n    /** @type {!Map.<string, !AnimationGroup>} */\n    this._animationGroups = new Map();\n    /** @type {!Set.<string>} */\n    this._pendingAnimations = new Set();\n    this._playbackRate = 1;\n    const resourceTreeModel =\n        /** @type {!SDK.ResourceTreeModel.ResourceTreeModel} */ (target.model(SDK.ResourceTreeModel.ResourceTreeModel));\n    resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.MainFrameNavigated, this._reset, this);\n    const screenCaptureModel = target.model(SDK.ScreenCaptureModel.ScreenCaptureModel);\n    if (screenCaptureModel) {\n      this._screenshotCapture = new ScreenshotCapture(this, screenCaptureModel);\n    }\n  }\n\n  _reset() {\n    this._animationsById.clear();\n    this._animationGroups.clear();\n    this._pendingAnimations.clear();\n    this.dispatchEventToListeners(Events.ModelReset);\n  }\n\n  /**\n   * @param {string} id\n   */\n  animationCreated(id) {\n    this._pendingAnimations.add(id);\n  }\n\n  /**\n   * @param {string} id\n   */\n  _animationCanceled(id) {\n    this._pendingAnimations.delete(id);\n    this._flushPendingAnimationsIfNeeded();\n  }\n\n  /**\n   * @param {!Protocol.Animation.Animation} payload\n   */\n  animationStarted(payload) {\n    // We are not interested in animations without effect or target.\n    if (!payload.source || !payload.source.backendNodeId) {\n      return;\n    }\n\n    const animation = AnimationImpl.parsePayload(this, payload);\n    if (!animation) {\n      return;\n    }\n\n    // Ignore Web Animations custom effects & groups.\n    const keyframesRule = animation.source().keyframesRule();\n    if (animation.type() === 'WebAnimation' && keyframesRule && keyframesRule.keyframes().length === 0) {\n      this._pendingAnimations.delete(animation.id());\n    } else {\n      this._animationsById.set(animation.id(), animation);\n      this._pendingAnimations.add(animation.id());\n    }\n\n    this._flushPendingAnimationsIfNeeded();\n  }\n\n  _flushPendingAnimationsIfNeeded() {\n    for (const id of this._pendingAnimations) {\n      if (!this._animationsById.get(id)) {\n        return;\n      }\n    }\n\n    while (this._pendingAnimations.size) {\n      this._matchExistingGroups(this._createGroupFromPendingAnimations());\n    }\n  }\n\n  /**\n   * @param {!AnimationGroup} incomingGroup\n   * @return {boolean}\n   */\n  _matchExistingGroups(incomingGroup) {\n    let matchedGroup = null;\n    for (const group of this._animationGroups.values()) {\n      if (group._matches(incomingGroup)) {\n        matchedGroup = group;\n        group._update(incomingGroup);\n        break;\n      }\n    }\n\n    if (!matchedGroup) {\n      this._animationGroups.set(incomingGroup.id(), incomingGroup);\n      if (this._screenshotCapture) {\n        this._screenshotCapture.captureScreenshots(incomingGroup.finiteDuration(), incomingGroup._screenshots);\n      }\n    }\n    this.dispatchEventToListeners(Events.AnimationGroupStarted, matchedGroup || incomingGroup);\n    return Boolean(matchedGroup);\n  }\n\n  /**\n   * @return {!AnimationGroup}\n   */\n  _createGroupFromPendingAnimations() {\n    console.assert(this._pendingAnimations.size > 0);\n    const firstAnimationId = this._pendingAnimations.values().next().value;\n    this._pendingAnimations.delete(firstAnimationId);\n\n    const firstAnimation = this._animationsById.get(firstAnimationId);\n    if (!firstAnimation) {\n      throw new Error('Unable to locate first animation');\n    }\n\n    const groupedAnimations = [firstAnimation];\n    const groupStartTime = firstAnimation.startTime();\n    const remainingAnimations = new Set();\n    for (const id of this._pendingAnimations) {\n      const anim = /** @type {!AnimationImpl} */ (this._animationsById.get(id));\n      if (anim.startTime() === groupStartTime) {\n        groupedAnimations.push(anim);\n      } else {\n        remainingAnimations.add(id);\n      }\n    }\n    this._pendingAnimations = remainingAnimations;\n    return new AnimationGroup(this, firstAnimationId, groupedAnimations);\n  }\n\n  /**\n   * @param {number} playbackRate\n   */\n  setPlaybackRate(playbackRate) {\n    this._playbackRate = playbackRate;\n    this._agent.invoke_setPlaybackRate({playbackRate});\n  }\n\n  /**\n   * @param {!Array.<string>} animations\n   */\n  _releaseAnimations(animations) {\n    this._agent.invoke_releaseAnimations({animations});\n  }\n\n  /**\n   * @override\n   * @return {!Promise<void>}\n   */\n  async suspendModel() {\n    this._reset();\n    await this._agent.invoke_disable();\n  }\n\n  /**\n   * @override\n   * @return {!Promise<void>}\n   */\n  async resumeModel() {\n    if (!this._enabled) {\n      return;\n    }\n    await this._agent.invoke_enable();\n  }\n\n  async ensureEnabled() {\n    if (this._enabled) {\n      return;\n    }\n    await this._agent.invoke_enable();\n    this._enabled = true;\n  }\n}\n\n/** @enum {symbol} */\nexport const Events = {\n  AnimationGroupStarted: Symbol('AnimationGroupStarted'),\n  ModelReset: Symbol('ModelReset')\n};\n\nexport class AnimationImpl {\n  /**\n   * @param {!AnimationModel} animationModel\n   * @param {!Protocol.Animation.Animation} payload\n   */\n  constructor(animationModel, payload) {\n    this._animationModel = animationModel;\n    this._payload = payload;\n    this._source =\n        new AnimationEffect(animationModel, /** @type {!Protocol.Animation.AnimationEffect} */ (this._payload.source));\n  }\n\n  /**\n   * @param {!AnimationModel} animationModel\n   * @param {!Protocol.Animation.Animation} payload\n   * @return {!AnimationImpl}\n   */\n  static parsePayload(animationModel, payload) {\n    return new AnimationImpl(animationModel, payload);\n  }\n\n  /**\n   * @return {!Protocol.Animation.Animation}\n   */\n  payload() {\n    return this._payload;\n  }\n\n  /**\n   * @return {string}\n   */\n  id() {\n    return this._payload.id;\n  }\n\n  /**\n   * @return {string}\n   */\n  name() {\n    return this._payload.name;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  paused() {\n    return this._payload.pausedState;\n  }\n\n  /**\n   * @return {string}\n   */\n  playState() {\n    return this._playState || this._payload.playState;\n  }\n\n  /**\n   * @param {string} playState\n   */\n  setPlayState(playState) {\n    this._playState = playState;\n  }\n\n  /**\n   * @return {number}\n   */\n  playbackRate() {\n    return this._payload.playbackRate;\n  }\n\n  /**\n   * @return {number}\n   */\n  startTime() {\n    return this._payload.startTime;\n  }\n\n  /**\n   * @return {number}\n   */\n  endTime() {\n    if (!this.source().iterations) {\n      return Infinity;\n    }\n    return this.startTime() + this.source().delay() + this.source().duration() * this.source().iterations() +\n        this.source().endDelay();\n  }\n\n  /**\n   * @return {number}\n   */\n  _finiteDuration() {\n    const iterations = Math.min(this.source().iterations(), 3);\n    return this.source().delay() + this.source().duration() * iterations;\n  }\n\n  /**\n   * @return {number}\n   */\n  currentTime() {\n    return this._payload.currentTime;\n  }\n\n  /**\n   * @return {!AnimationEffect}\n   */\n  source() {\n    return this._source;\n  }\n\n  /**\n   * @return {!Type}\n   */\n  type() {\n    return (\n        /** @type {!Type} */ (this._payload.type));\n  }\n\n  /**\n   * @param {!AnimationImpl} animation\n   * @return {boolean}\n   */\n  overlaps(animation) {\n    // Infinite animations\n    if (!this.source().iterations() || !animation.source().iterations()) {\n      return true;\n    }\n\n    const firstAnimation = this.startTime() < animation.startTime() ? this : animation;\n    const secondAnimation = firstAnimation === this ? animation : this;\n    return firstAnimation.endTime() >= secondAnimation.startTime();\n  }\n\n  /**\n   * @param {number} duration\n   * @param {number} delay\n   */\n  setTiming(duration, delay) {\n    this._source.node().then(node => {\n      if (!node) {\n        throw new Error('Unable to find node');\n      }\n      this._updateNodeStyle(duration, delay, node);\n    });\n    this._source._duration = duration;\n    this._source._delay = delay;\n    this._animationModel._agent.invoke_setTiming({animationId: this.id(), duration, delay});\n  }\n\n  /**\n   * @param {number} duration\n   * @param {number} delay\n   * @param {!SDK.DOMModel.DOMNode} node\n   */\n  _updateNodeStyle(duration, delay, node) {\n    let animationPrefix;\n    if (this.type() === Type.CSSTransition) {\n      animationPrefix = 'transition-';\n    } else if (this.type() === Type.CSSAnimation) {\n      animationPrefix = 'animation-';\n    } else {\n      return;\n    }\n\n    if (!node.id) {\n      throw new Error('Node has no id');\n    }\n\n    const cssModel = node.domModel().cssModel();\n    cssModel.setEffectivePropertyValueForNode(node.id, animationPrefix + 'duration', duration + 'ms');\n    cssModel.setEffectivePropertyValueForNode(node.id, animationPrefix + 'delay', delay + 'ms');\n  }\n\n  /**\n   * @return {!Promise<?SDK.RemoteObject.RemoteObject>}\n   */\n  async remoteObjectPromise() {\n    const payload = await this._animationModel._agent.invoke_resolveAnimation({animationId: this.id()});\n    if (!payload) {\n      return null;\n    }\n\n    return this._animationModel._runtimeModel.createRemoteObject(payload.remoteObject);\n  }\n\n  /**\n   * @return {string}\n   */\n  _cssId() {\n    return this._payload.cssId || '';\n  }\n}\n\n/** @enum {string} */\nexport const Type = {\n  CSSTransition: 'CSSTransition',\n  CSSAnimation: 'CSSAnimation',\n  WebAnimation: 'WebAnimation'\n};\n\nexport class AnimationEffect {\n  /**\n   * @param {!AnimationModel} animationModel\n   * @param {!Protocol.Animation.AnimationEffect} payload\n   */\n  constructor(animationModel, payload) {\n    this._animationModel = animationModel;\n    this._payload = payload;\n    if (payload.keyframesRule) {\n      this._keyframesRule = new KeyframesRule(payload.keyframesRule);\n    }\n    this._delay = this._payload.delay;\n    this._duration = this._payload.duration;\n  }\n\n  /**\n   * @return {number}\n   */\n  delay() {\n    return this._delay;\n  }\n\n  /**\n   * @return {number}\n   */\n  endDelay() {\n    return this._payload.endDelay;\n  }\n\n  /**\n   * @return {number}\n   */\n  iterationStart() {\n    return this._payload.iterationStart;\n  }\n\n  /**\n   * @return {number}\n   */\n  iterations() {\n    // Animations with zero duration, zero delays and infinite iterations can't be shown.\n    if (!this.delay() && !this.endDelay() && !this.duration()) {\n      return 0;\n    }\n    return this._payload.iterations || Infinity;\n  }\n\n  /**\n   * @return {number}\n   */\n  duration() {\n    return this._duration;\n  }\n\n  /**\n   * @return {string}\n   */\n  direction() {\n    return this._payload.direction;\n  }\n\n  /**\n   * @return {string}\n   */\n  fill() {\n    return this._payload.fill;\n  }\n\n  /**\n   * @return {!Promise.<?SDK.DOMModel.DOMNode>}\n   */\n  node() {\n    if (!this._deferredNode) {\n      this._deferredNode = new SDK.DOMModel.DeferredDOMNode(this._animationModel.target(), this.backendNodeId());\n    }\n    return this._deferredNode.resolvePromise();\n  }\n\n  /**\n   * @return {!SDK.DOMModel.DeferredDOMNode}\n   */\n  deferredNode() {\n    return new SDK.DOMModel.DeferredDOMNode(this._animationModel.target(), this.backendNodeId());\n  }\n\n  /**\n   * @return {number}\n   */\n  backendNodeId() {\n    return /** @type {number} */ (this._payload.backendNodeId);\n  }\n\n  /**\n   * @return {?KeyframesRule}\n   */\n  keyframesRule() {\n    return this._keyframesRule || null;\n  }\n\n  /**\n   * @return {string}\n   */\n  easing() {\n    return this._payload.easing;\n  }\n}\n\nexport class KeyframesRule {\n  /**\n   * @param {!Protocol.Animation.KeyframesRule} payload\n   */\n  constructor(payload) {\n    this._payload = payload;\n    this._keyframes = this._payload.keyframes.map(function(keyframeStyle) {\n      return new KeyframeStyle(keyframeStyle);\n    });\n  }\n\n  /**\n   * @param {!Array.<!Protocol.Animation.KeyframeStyle>} payload\n   */\n  _setKeyframesPayload(payload) {\n    this._keyframes = payload.map(function(keyframeStyle) {\n      return new KeyframeStyle(keyframeStyle);\n    });\n  }\n\n  /**\n   * @return {string|undefined}\n   */\n  name() {\n    return this._payload.name;\n  }\n\n  /**\n   * @return {!Array.<!KeyframeStyle>}\n   */\n  keyframes() {\n    return this._keyframes;\n  }\n}\n\nexport class KeyframeStyle {\n  /**\n   * @param {!Protocol.Animation.KeyframeStyle} payload\n   */\n  constructor(payload) {\n    this._payload = payload;\n    this._offset = this._payload.offset;\n  }\n\n  /**\n   * @return {string}\n   */\n  offset() {\n    return this._offset;\n  }\n\n  /**\n   * @param {number} offset\n   */\n  setOffset(offset) {\n    this._offset = offset * 100 + '%';\n  }\n\n  /**\n   * @return {number}\n   */\n  offsetAsNumber() {\n    return parseFloat(this._offset) / 100;\n  }\n\n  /**\n   * @return {string}\n   */\n  easing() {\n    return this._payload.easing;\n  }\n}\n\nexport class AnimationGroup {\n  /**\n   * @param {!AnimationModel} animationModel\n   * @param {string} id\n   * @param {!Array.<!AnimationImpl>} animations\n   */\n  constructor(animationModel, id, animations) {\n    this._animationModel = animationModel;\n    this._id = id;\n    this._animations = animations;\n    this._paused = false;\n    /**\n     * @type {!Array<string>}\n     */\n    this._screenshots = [];\n\n    /**\n     * @type {!Array<!HTMLImageElement>}\n     */\n    this._screenshotImages = [];\n  }\n\n  /**\n   * @return {string}\n   */\n  id() {\n    return this._id;\n  }\n\n  /**\n   * @return {!Array.<!AnimationImpl>}\n   */\n  animations() {\n    return this._animations;\n  }\n\n  release() {\n    this._animationModel._animationGroups.delete(this.id());\n    this._animationModel._releaseAnimations(this._animationIds());\n  }\n\n  /**\n   * @return {!Array.<string>}\n   */\n  _animationIds() {\n    /**\n     * @param {!AnimationImpl} animation\n     * @return {string}\n     */\n    function extractId(animation) {\n      return animation.id();\n    }\n\n    return this._animations.map(extractId);\n  }\n\n  /**\n   * @return {number}\n   */\n  startTime() {\n    return this._animations[0].startTime();\n  }\n\n  /**\n   * @return {number}\n   */\n  finiteDuration() {\n    let maxDuration = 0;\n    for (let i = 0; i < this._animations.length; ++i) {\n      maxDuration = Math.max(maxDuration, this._animations[i]._finiteDuration());\n    }\n    return maxDuration;\n  }\n\n  /**\n   * @param {number} currentTime\n   */\n  seekTo(currentTime) {\n    this._animationModel._agent.invoke_seekAnimations({animations: this._animationIds(), currentTime});\n  }\n\n  /**\n   * @return {boolean}\n   */\n  paused() {\n    return this._paused;\n  }\n\n  /**\n   * @param {boolean} paused\n   */\n  togglePause(paused) {\n    if (paused === this._paused) {\n      return;\n    }\n    this._paused = paused;\n    this._animationModel._agent.invoke_setPaused({animations: this._animationIds(), paused});\n  }\n\n  /**\n   * @return {!Promise<number>}\n   */\n  currentTimePromise() {\n    let longestAnim = null;\n    for (const anim of this._animations) {\n      if (!longestAnim || anim.endTime() > longestAnim.endTime()) {\n        longestAnim = anim;\n      }\n    }\n    if (!longestAnim) {\n      throw new Error('No longest animation found');\n    }\n\n    return this._animationModel._agent.invoke_getCurrentTime({id: longestAnim.id()})\n        .then(({currentTime}) => currentTime || 0);\n  }\n\n  /**\n   * @param {!AnimationGroup} group\n   * @return {boolean}\n   */\n  _matches(group) {\n    /**\n     * @param {!AnimationImpl} anim\n     * @return {string}\n     */\n    function extractId(anim) {\n      if (anim.type() === Type.WebAnimation) {\n        return anim.type() + anim.id();\n      }\n      return anim._cssId();\n    }\n\n    if (this._animations.length !== group._animations.length) {\n      return false;\n    }\n    const left = this._animations.map(extractId).sort();\n    const right = group._animations.map(extractId).sort();\n    for (let i = 0; i < left.length; i++) {\n      if (left[i] !== right[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * @param {!AnimationGroup} group\n   */\n  _update(group) {\n    this._animationModel._releaseAnimations(this._animationIds());\n    this._animations = group._animations;\n  }\n\n  /**\n   * @return {!Array.<!HTMLImageElement>}\n   */\n  screenshots() {\n    for (let i = 0; i < this._screenshots.length; ++i) {\n      const image = new Image();\n      image.src = 'data:image/jpeg;base64,' + this._screenshots[i];\n      this._screenshotImages.push(image);\n    }\n    this._screenshots = [];\n    return this._screenshotImages;\n  }\n}\n\n/**\n * @implements {ProtocolProxyApi.AnimationDispatcher}\n */\nexport class AnimationDispatcher {\n  /**\n   * @param {!AnimationModel} animationModel\n   */\n  constructor(animationModel) {\n    this._animationModel = animationModel;\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.Animation.AnimationCreatedEvent} event\n   */\n  animationCreated({id}) {\n    this._animationModel.animationCreated(id);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.Animation.AnimationCanceledEvent} event\n   */\n  animationCanceled({id}) {\n    this._animationModel._animationCanceled(id);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.Animation.AnimationStartedEvent} event\n   */\n  animationStarted({animation}) {\n    this._animationModel.animationStarted(animation);\n  }\n}\n\nexport class ScreenshotCapture {\n  /**\n   * @param {!AnimationModel} animationModel\n   * @param {!SDK.ScreenCaptureModel.ScreenCaptureModel} screenCaptureModel\n   */\n  constructor(animationModel, screenCaptureModel) {\n    /** @type {!Array<!Request>} */\n    this._requests = [];\n    this._screenCaptureModel = screenCaptureModel;\n    this._animationModel = animationModel;\n    this._animationModel.addEventListener(Events.ModelReset, this._stopScreencast, this);\n  }\n\n  /**\n   * @param {number} duration\n   * @param {!Array<string>} screenshots\n   */\n  captureScreenshots(duration, screenshots) {\n    const screencastDuration = Math.min(duration / this._animationModel._playbackRate, 3000);\n    const endTime = screencastDuration + window.performance.now();\n    this._requests.push({endTime: endTime, screenshots: screenshots});\n\n    if (!this._endTime || endTime > this._endTime) {\n      clearTimeout(this._stopTimer);\n      this._stopTimer = window.setTimeout(this._stopScreencast.bind(this), screencastDuration);\n      this._endTime = endTime;\n    }\n\n    if (this._capturing) {\n      return;\n    }\n    this._capturing = true;\n    this._screenCaptureModel.startScreencast(\n        Protocol.Page.StartScreencastRequestFormat.Jpeg, 80, undefined, 300, 2, this._screencastFrame.bind(this),\n        visible => {});\n  }\n\n  /**\n   * @param {string} base64Data\n   * @param {!Protocol.Page.ScreencastFrameMetadata} metadata\n   */\n  _screencastFrame(base64Data, metadata) {\n    /**\n     * @param {!Request} request\n     * @return {boolean}\n     */\n    function isAnimating(request) {\n      return request.endTime >= now;\n    }\n\n    if (!this._capturing) {\n      return;\n    }\n\n    const now = window.performance.now();\n    this._requests = this._requests.filter(isAnimating);\n    for (const request of this._requests) {\n      request.screenshots.push(base64Data);\n    }\n  }\n\n  _stopScreencast() {\n    if (!this._capturing) {\n      return;\n    }\n\n    delete this._stopTimer;\n    delete this._endTime;\n    this._requests = [];\n    this._capturing = false;\n    this._screenCaptureModel.stopScreencast();\n  }\n}\n\nSDK.SDKModel.SDKModel.register(AnimationModel, SDK.SDKModel.Capability.DOM, false);\n\n/** @typedef {{ endTime: number, screenshots: !Array.<string>}} */\n// @ts-ignore Typedef\nexport let Request;\n"]}